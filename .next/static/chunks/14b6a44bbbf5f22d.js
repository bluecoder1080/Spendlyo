(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68834,e=>{"use strict";var t=e.i(71645);let s=e=>{let t,s=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>n,subscribe:e=>(s.add(e),()=>s.delete(e))},n=t=e(r,a,i);return i},r=e=>{let r=e?s(e):s,a=e=>(function(e,s=e=>e){let r=t.default.useSyncExternalStore(e.subscribe,t.default.useCallback(()=>s(e.getState()),[e,s]),t.default.useCallback(()=>s(e.getInitialState()),[e,s]));return t.default.useDebugValue(r),r})(r,e);return Object.assign(a,r),a},a=e=>e?r(e):r;e.s(["create",()=>a],68834)},93479,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(75157);let a=s.forwardRef(({className:e,type:s,...a},i)=>(0,t.jsx)("input",{type:s,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));a.displayName="Input",e.s(["Input",()=>a])},35403,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(68834),a=e.i(11795);let i=(0,r.create)((e,t)=>({messages:[],isLoading:!1,fetchMessages:async()=>{e({isLoading:!0});let t=(0,a.createClient)(),{data:{user:s}}=await t.auth.getUser();if(!s)return void e({messages:[],isLoading:!1});let{data:r,error:i}=await t.from("messages").select("*").order("created_at",{ascending:!0});if(i){console.error("Error fetching messages:",i),e({isLoading:!1});return}e({messages:r,isLoading:!1})},sendMessage:async(t,s="user")=>{let r=(0,a.createClient)(),{data:{user:i}}=await r.auth.getUser();if(!i)return;let n=crypto.randomUUID(),l={id:n,user_id:i.id,content:t,role:s,created_at:new Date().toISOString()};e(e=>({messages:[...e.messages,l]}));let{data:o,error:d}=await r.from("messages").insert({user_id:i.id,content:t,role:s}).select().single();if(d){console.error("Error sending message:",d),e(e=>({messages:e.messages.filter(e=>e.id!==n)}));return}o&&e(e=>({messages:e.messages.map(e=>e.id===n?o:e)}))}}));var n=e.i(19455),l=e.i(93479);let o=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var d=e.i(75157);function c(){let{messages:e,fetchMessages:r,sendMessage:a,isLoading:c}=i(),[u,f]=(0,s.useState)(""),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{r()},[r]),(0,s.useEffect)(()=>{g.current?.scrollIntoView({behavior:"smooth"})},[e]);let m=async()=>{u.trim()&&(await a(u),f(""))};return(0,t.jsxs)("div",{className:"flex flex-col h-[600px] border rounded-lg bg-background shadow-sm",children:[(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c&&0===e.length&&(0,t.jsx)("div",{className:"text-center text-muted-foreground text-sm",children:"Loading chat..."}),0===e.length&&!c&&(0,t.jsxs)("div",{className:"text-center text-muted-foreground text-sm flex flex-col items-center justify-center h-full opacity-50",children:[(0,t.jsx)("p",{children:"No messages yet."}),(0,t.jsx)("p",{children:"Start tracking your expenses!"})]}),e.map(e=>(0,t.jsx)("div",{className:(0,d.cn)("flex w-full mb-2","user"===e.role?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:(0,d.cn)("max-w-[80%] rounded-2xl px-4 py-2 text-sm","user"===e.role?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:[e.content,(0,t.jsx)("div",{className:(0,d.cn)("text-[10px] mt-1 opacity-70","user"===e.role?"text-primary-foreground/80":"text-muted-foreground"),children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),(0,t.jsx)("div",{ref:g})]}),(0,t.jsxs)("div",{className:"p-4 border-t flex gap-2",children:[(0,t.jsx)(l.Input,{value:u,onChange:e=>f(e.target.value),onKeyDown:e=>"Enter"===e.key&&m(),placeholder:"New expense... (e.g. 'Lunch 350')",className:"flex-1"}),(0,t.jsx)(n.Button,{size:"icon",onClick:m,disabled:!u.trim(),children:(0,t.jsx)(o,{className:"h-4 w-4"})})]})]})}e.s(["ChatInterface",()=>c],35403)}]);