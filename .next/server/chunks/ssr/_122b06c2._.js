module.exports=[20226,a=>{"use strict";var b=a.i(72131);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>{let d=a?c(a):c,e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(d,a);return Object.assign(e,d),e},e=a=>a?d(a):d;a.s(["create",()=>e],20226)},66718,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},20037,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(20226),e=a.i(95445);let f=(0,d.create)((a,b)=>({messages:[],isLoading:!1,fetchMessages:async()=>{a({isLoading:!0});let b=(0,e.createClient)(),{data:{user:c}}=await b.auth.getUser();if(!c)return void a({messages:[],isLoading:!1});let{data:d,error:f}=await b.from("messages").select("*").order("created_at",{ascending:!0});if(f){console.error("Error fetching messages:",f),a({isLoading:!1});return}a({messages:d,isLoading:!1})},sendMessage:async(b,c="user")=>{let d=(0,e.createClient)(),{data:{user:f}}=await d.auth.getUser();if(!f)return;let g=crypto.randomUUID(),h={id:g,user_id:f.id,content:b,role:c,created_at:new Date().toISOString()};a(a=>({messages:[...a.messages,h]}));let{data:i,error:j}=await d.from("messages").insert({user_id:f.id,content:b,role:c}).select().single();if(j){console.error("Error sending message:",j),a(a=>({messages:a.messages.filter(a=>a.id!==g)}));return}i&&a(a=>({messages:a.messages.map(a=>a.id===g?i:a)}))}}));var g=a.i(99570),h=a.i(66718);let i=(0,a.i(70106).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var j=a.i(68114);function k(){let{messages:a,fetchMessages:d,sendMessage:e,isLoading:k}=f(),[l,m]=(0,c.useState)(""),n=(0,c.useRef)(null);(0,c.useEffect)(()=>{d()},[d]),(0,c.useEffect)(()=>{n.current?.scrollIntoView({behavior:"smooth"})},[a]);let o=async()=>{l.trim()&&(await e(l),m(""))};return(0,b.jsxs)("div",{className:"flex flex-col h-[600px] border rounded-lg bg-background shadow-sm",children:[(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[k&&0===a.length&&(0,b.jsx)("div",{className:"text-center text-muted-foreground text-sm",children:"Loading chat..."}),0===a.length&&!k&&(0,b.jsxs)("div",{className:"text-center text-muted-foreground text-sm flex flex-col items-center justify-center h-full opacity-50",children:[(0,b.jsx)("p",{children:"No messages yet."}),(0,b.jsx)("p",{children:"Start tracking your expenses!"})]}),a.map(a=>(0,b.jsx)("div",{className:(0,j.cn)("flex w-full mb-2","user"===a.role?"justify-end":"justify-start"),children:(0,b.jsxs)("div",{className:(0,j.cn)("max-w-[80%] rounded-2xl px-4 py-2 text-sm","user"===a.role?"bg-primary text-primary-foreground rounded-br-none":"bg-muted text-foreground rounded-bl-none"),children:[a.content,(0,b.jsx)("div",{className:(0,j.cn)("text-[10px] mt-1 opacity-70","user"===a.role?"text-primary-foreground/80":"text-muted-foreground"),children:new Date(a.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},a.id)),(0,b.jsx)("div",{ref:n})]}),(0,b.jsxs)("div",{className:"p-4 border-t flex gap-2",children:[(0,b.jsx)(h.Input,{value:l,onChange:a=>m(a.target.value),onKeyDown:a=>"Enter"===a.key&&o(),placeholder:"New expense... (e.g. 'Lunch 350')",className:"flex-1"}),(0,b.jsx)(g.Button,{size:"icon",onClick:o,disabled:!l.trim(),children:(0,b.jsx)(i,{className:"h-4 w-4"})})]})]})}a.s(["ChatInterface",()=>k],20037)}];

//# sourceMappingURL=_122b06c2._.js.map